---
title: 앱 Earthquakes 튜토리얼을 따라가며 정리
author: Mirae
date: 2023-01-17
category: TIL
layout: post
---

[Earthquakes app tutorial](https://developer.apple.com/tutorials/app-dev-training/decoding-structured-json)  
> 이 글은 위의 apple developer tutorial을 따라가며 정리한 내용입니다. 
  
  
  
# Error 
> /decoding-structured-json/Decode earthquake data/step 8  
  
  Swift에서는 Error 프로토콜을 따르는 타입을 사용하여 에러를 나타냅니다.  
  Error 프로토콜은 에러를 핸들링하기 위해 사용되는 타입이라는 것을 나타낼 뿐 아무런 내용이 없습니다.  
  요구사항도 없습니다. 그래서 커스텀 타입에 자유롭게 사용할 수 있습니다.  
    
```swift 
enum QuakeError: Error {
    case missingData
}

extension QuakeError: LocalizedError {
    var errorDescription: String? {
        switch self {
        case .missingData:
            return NSLocalizedString("Found and will discard a quake missing a valid code, magnitude, place, or time.", comment: "")
        }
    }
}
```  
  
  위 QuakeError enumeration은 case missingData를 가지는데 LocalizedError 프로토콜을 따르는 extension을 작성하여, QuakeError.missingData로 에러가 던져질 경우 "code, maginitude, place, time 중 없는 데이터가 있어 정상적으로 코드가 작동하지 않았다"는 메세지를 표출할 것입니다. 
  
```swift
// Quake struct라는 설계도를 사용하여 디코딩하는 인스턴스를 생성하기 위해 from decoder:_를 인자로 가지는 init 사용
// throws function, try, try?를 사용하여 디코딩 과정 중 에러 발생 시 nil을 반환하도록 처리함
init(from decoder: Decoder) throws {
    let values = try decoder.container(keyedBy: CodingKeys.self)
    let rawMagnitude = try? values.decode(Double.self, forKey: .magitude)
    let rawPlace = try? values.decode(String.self, forKey: .place)
    let rawTime = try? values.decode(Date.self, forKey: .time)
    let rawCode = try? values.decode(String.self, forKey: .code)
    let rawDetail = try? values.decode(URL.self, forKey: .detail)
    
    // try? 가 사용된 곳에서 에러가 발생하지 않으면 옵셔널 값이 반환되므로 해당 값을 unwrapping 함
    guard let magnitude = rawMagnitude,
          let place = rawPlace,
          let time = rawTime,
          let code = rawCode,
          let detail = rawDetail
    else {
        throw QuakeError.missingData
    }
```
  
위 예시의 가장 아래쪽에 있는 else 구문에서 throw 키워드를 사용하여 에러를 던졌습니다. magnitude, place, time, code, detail 중 데이터가 없는 것이 있을 때 QuakeError.missingData 에러가 던져집니다. 
